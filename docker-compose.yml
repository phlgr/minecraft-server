services:
  minecraft:
    image: itzg/minecraft-server:latest
    container_name: minecraft-server
    restart: unless-stopped
    ports:
      - "${MINECRAFT_PORT:-25565}:25565"
      - "24454:24454/udp" # SimpleVoiceChat UDP port
    volumes:
      - ./data:/data
    environment:
      EULA: "TRUE"
      TYPE: "${MINECRAFT_TYPE:-PAPER}"
      VERSION: "${MINECRAFT_VERSION:-LATEST}"
      MEMORY: "${MINECRAFT_MEMORY:-2G}"
      PLUGINS: "${MINECRAFT_PLUGINS:-}"
      REMOVE_OLD_MODS: "${MINECRAFT_REMOVE_OLD_MODS:-true}"
      JVM_XX_OPTS: "${MINECRAFT_JVM_OPTS:--XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200}"
