services:
  minecraft:
    image: itzg/minecraft-server:latest
    container_name: minecraft-server
    restart: unless-stopped
    ports:
      - "${MINECRAFT_PORT:-25565}:25565"
      - "${MINECRAFT_RCON_PORT:-25575}:25575"
    volumes:
      - ./data:/data
      - ./patches:/patches:ro
    environment:
      EULA: "TRUE"
      TYPE: "${MINECRAFT_TYPE:-PURPUR}"
      VERSION: "${MINECRAFT_VERSION:-LATEST}"
      MEMORY: "${MINECRAFT_MEMORY:-2G}"
      PLUGINS: "${MINECRAFT_PLUGINS:-}"
      PATCH_DEFINITIONS: "/patches"
      REMOVE_OLD_MODS: "${MINECRAFT_REMOVE_OLD_PLUGINS:-true}"
      JVM_XX_OPTS: "${MINECRAFT_JVM_OPTS:--XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200}"
